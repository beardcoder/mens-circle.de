<fluid
    data-namespace-typo3-fluid="true"
    xmlns:app="http://typo3.org/ns/MensCircle/Sitepackage/ViewHelpers"
    xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:vite="http://typo3.org/ns/Praetorius/ViteAssetCollector/ViewHelpers"
>

<vite:asset entry="EXT:sitepackage/Resources/Private/Partials/Content/Features.entry.css"/>

<section class="features" id="c{data.uid}">
    <f:if condition="{record.header}">
        <header class="features__intro">
            <h2 class="section__title reveal-text">{record.header}</h2>
        </header>
    </f:if>

    <f:if condition="{record.tx_sitepackage_feature_items}">
        <div class="features__grid">
            <f:for as="featureItem" each="{record.tx_sitepackage_feature_items}" iteration="iteration">
                <f:variable name="hasImage" value="{featureItem.assets.0}"/>
                <f:variable name="isLarge" value="{featureItem.layout == '200'}"/>

                <article
                    class="feature-card reveal-card{f:if(condition: '!{hasImage}', then: ' feature-card--text')}{f:if(condition: isLarge, then: ' feature-card--large')}"
                    id="c{featureItem.uid}"
                >
                    <f:if condition="{hasImage}">
                        <div class="feature-card__image">
                            <app:responsiveImage
                                alt="{featureItem.assets.0.alternative}"
                                class="feature-card__img"
                                format="webp"
                                image="{featureItem.assets.0}"
                                sizes="(min-width: 1200px) 33vw, (min-width: 768px) 50vw, 100vw"
                                widths="480, 720, 960, 1280"
                            />
                        </div>
                    </f:if>
                    <div class="feature-card__content">
                        <f:if condition="{featureItem.subheader}">
                            <span class="feature-card__label">{featureItem.subheader}</span>
                        </f:if>
                        <h3 class="feature-card__title">{featureItem.header}</h3>
                        {featureItem.bodytext -> f:format.html()}
                    </div>
                </article>
            </f:for>
        </div>
    </f:if>
</section>

</fluid>
