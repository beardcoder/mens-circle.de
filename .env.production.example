# ============================================
# Coolify v4 Environment Variables
# TYPO3 v13 + FrankenPHP Production Setup
# MINIMIZED VERSION - Only Required Variables
# ============================================

# ============================================
# Coolify Auto-Generated Variables
# These will be automatically set by Coolify
# ============================================

# SERVICE_FQDN_PHP_80=your-domain.com (auto-set by Coolify)
# SERVER_NAME will be auto-set from SERVICE_FQDN_PHP_80

# ============================================
# Database Configuration (REQUIRED)
# ============================================

DB_ROOT_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DB_DATABASE=typo3
DB_USERNAME=typo3
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ============================================
# Security (REQUIRED)
# ============================================

# JWT Secret for Newsletter tokens (min 32 chars)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_RANDOM_STRING_MIN_32_CHARS

# TYPO3 Install Tool Password
# ⚠️  IMPORTANT: The $ character in Argon2 hashes causes issues in Docker!
#
# Choose ONE of these 3 methods:

# METHOD 1: Plain-text password (RECOMMENDED for Coolify)
# Will be hashed automatically at runtime
INSTALL_TOOL_PASSWORD=your-strong-password

# METHOD 2: Base64-encoded hash (if plain-text doesn't work)
# Generate with:
#   HASH=$(php -r "echo password_hash('your-password', PASSWORD_ARGON2I);")
#   echo $HASH | base64
# INSTALL_TOOL_PASSWORD_BASE64=JGFyZ29uMmkkdj0xOSRtPTY1NTM2LHQ9MTYscD0xJA==

# METHOD 3: Pre-hashed with escaped $ (advanced, not recommended)
# You must escape $ as $$ in Coolify UI
# INSTALL_TOOL_PASSWORD_HASH=$$argon2i$$v=19$$m=65536,t=16,p=1$$HASH

# TYPO3 Encryption Key (96 chars hex)
# Generate with: openssl rand -hex 48
TYPO3_ENCRYPTION_KEY=CHANGE_ME_96_CHARS_HEX

# ============================================
# Mail Configuration (REQUIRED for production)
# ============================================

TYPO3_MAIL_TRANSPORT=smtp
TYPO3_MAIL_SMTP_SERVER=smtp.example.com:587
TYPO3_MAIL_SMTP_ENCRYPT=tls
TYPO3_MAIL_SMTP_USERNAME=noreply@example.com
TYPO3_MAIL_SMTP_PASSWORD=CHANGE_ME
TYPO3_MAIL_DEFAULT_FROM=noreply@example.com
TYPO3_MAIL_DEFAULT_FROM_NAME=Mens Circle

# ============================================
# Optional: FrankenPHP Worker Mode
# Uncomment for 3-4x better performance
# ============================================

# FRANKENPHP_CONFIG=worker ./public/index.php

# ============================================
# NOTE: The following are NOT needed anymore
# They use sensible defaults in the configuration
# ============================================

# ❌ REMOVED (hardcoded defaults):
# - TYPO3_DB_DRIVER=mysqli (always mysqli)
# - TYPO3_DB_HOST=db (Docker service name)
# - TYPO3_DB_PORT=3306 (standard MySQL port)
# - TYPO3_CACHE_REDIS_HOST=redis (Docker service name)
# - TYPO3_CACHE_REDIS_PORT=6379 (standard Redis port)
# - PHP_MEMORY_LIMIT=512M (set in Dockerfile)
# - PHP_OPCACHE_ENABLE=1 (set in Dockerfile)
# - PHP_DATE_TIMEZONE=Europe/Berlin (set in Dockerfile)
